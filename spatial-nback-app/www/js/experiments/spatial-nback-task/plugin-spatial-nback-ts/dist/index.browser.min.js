var jsPsychPluginSpatialNbackTs=function(o){"use strict";var P="0.0.1";const I={name:"plugin-spatial-nback-ts",version:P,parameters:{rows:{type:o.ParameterType.INT,default:3},cols:{type:o.ParameterType.INT,default:3},cell_size:{type:o.ParameterType.INT,default:100},stimulus_row:{type:o.ParameterType.INT,default:0},stimulus_col:{type:o.ParameterType.INT,default:0},is_target:{type:o.ParameterType.BOOL,default:!1},stimulus_duration:{type:o.ParameterType.INT,default:500},isi_duration:{type:o.ParameterType.INT,default:1e3},feedback_duration:{type:o.ParameterType.INT,default:500},show_feedback_time:{type:o.ParameterType.BOOL,default:!0},show_feedback_border:{type:o.ParameterType.BOOL,default:!0},showFeedbackNoResponse:{type:o.ParameterType.BOOL,default:!0},feedbackWaitNoResponse:{type:o.ParameterType.BOOL,default:!0},button_text:{type:o.ParameterType.STRING,default:""},stimulus_color:{type:o.ParameterType.STRING,default:"#0066cc"},correct_color:{type:o.ParameterType.STRING,default:"#00cc00"},incorrect_color:{type:o.ParameterType.STRING,default:"#cc0000"},instructions:{type:o.ParameterType.STRING,default:"Click MATCH when this is a target trial."}},data:{stimulus_row:{type:o.ParameterType.INT},stimulus_col:{type:o.ParameterType.INT},is_target:{type:o.ParameterType.BOOL},response:{type:o.ParameterType.BOOL},response_time:{type:o.ParameterType.INT},correct:{type:o.ParameterType.BOOL}},citations:{apa:"A. Hunter Farhat A. Hunter Farhat, A. H. F. (2023). {title}. Journal for Open Source Software, 1(1), 1. https://doi.org/10.21105/joss.12345 ",bibtex:"@article{Hunter2023title, 	author = {A. Hunter Farhat A. Hunter Farhat, A. Hunter Farhat}, 	journal = {Journal for Open Source Software}, 	doi = {10.21105/joss.12345}, 	issn = {1234-5678}, 	number = {1}, 	year = {2023}, 	month = {may 11}, 	pages = {1}, 	publisher = {Open Journals}, 	title = {\\textbraceleft{}title\\textbraceright{}}, 	url = {{linkToPublicationInJournal}}, 	volume = {1}, }  "}};class T{constructor(b){this.jsPsych=b}trial(b,e){var x,w;let d,m=!1,p=!1,h,k,u=!1;const y=(x=e.stimulus_row)!=null?x:Math.floor(Math.random()*e.rows),_=(w=e.stimulus_col)!=null?w:Math.floor(Math.random()*e.cols),N=()=>{let t=`
        <div id="nback-container" style="
          position: fixed;
          top: 50%;
          left: 50%;
          transform: translate(-50%, -50%);
          width: 100vw;
          height: 100vh;
          display: flex;
          flex-direction: column;
          justify-content: center;
          align-items: center;
          font-family: Arial, sans-serif;
          box-sizing: border-box;
          padding: 20px;
        ">`;t+=`<div id="nback-instructions" style="
        position: absolute;
        top: 15vh;
        left: 50%;
        transform: translateX(-50%);
        width: 80%;
        max-width: 520px;
        text-align: center;
        font-size: clamp(14px, 2vmin, 18px);
        z-index: 10;
      ">${e.instructions}</div>`;const a=`${Math.min(50,80/Math.max(e.rows,e.cols))/Math.max(e.rows,e.cols)}vmin`;t+=`<div id="nback-grid" style="
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        border: 2px solid #000;
        box-sizing: border-box;
        display: inline-block;
        z-index: 5;
      ">`;for(let s=0;s<e.rows;s++){t+='<div style="display: flex;">';for(let n=0;n<e.cols;n++)t+=`<div id="cell-${s}-${n}" style="
            width: ${a};
            height: ${a};
            border: 1px solid #ccc;
            background-color: white;
            box-sizing: border-box;
            min-width: ${Math.max(40,e.cell_size*.5)}px;
            min-height: ${Math.max(40,e.cell_size*.5)}px;
          "></div>`;t+="</div>"}t+="</div>",t+=`<div id="nback-button-container" style="
        position: absolute;
        bottom: 15vh;
        left: 50%;
        transform: translateX(-50%);
        z-index: 10;
      ">`,t+=`<button id="nback-response-btn" style="
        font-size: clamp(18px, 3vmin, 26px);
        padding: clamp(18px, 2.5vmin, 30px) clamp(35px, 5vmin, 60px);
        background-color: #2196F3;
        color: white;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        font-weight: bold;
        box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        transition: all 0.2s;
      " disabled>${e.button_text}</button>`,t+="</div>",t+=`<div id="nback-feedback" style="
        position: absolute;
        bottom: 8vh;
        left: 50%;
        transform: translateX(-50%);
        height: 40px;
        font-size: clamp(14px, 2vmin, 20px);
        font-weight: bold;
        text-align: center;
        z-index: 10;
        width: 80%;
      "></div>`,t+="</div>",b.innerHTML=t;const r=document.getElementById("nback-response-btn");r.addEventListener("mouseenter",()=>{r.disabled||(r.style.backgroundColor="#1976D2",r.style.transform="translateY(-2px)")}),r.addEventListener("mouseleave",()=>{r.style.backgroundColor="#2196F3",r.style.transform="translateY(0)"}),r.addEventListener("click",O)},M=()=>{const t=document.getElementById(`cell-${y}-${_}`);t.style.backgroundColor=e.stimulus_color,m=!0,d=performance.now(),u=!1;const a=document.getElementById("nback-response-btn");a.disabled=!1,h=window.setTimeout(()=>{t.style.backgroundColor="white",u=!0,k=window.setTimeout(()=>{m&&!p&&$()},e.isi_duration)},e.stimulus_duration)},O=()=>{if(!m||p)return;m=!1,p=!0;const t=performance.now()-d,a=e.is_target;clearTimeout(h),clearTimeout(k),g(a,t,!0)},$=()=>{if(!m||p)return;m=!1,p=!0;const t=!e.is_target;g(t,null,!1)},g=(t,a,r)=>{if(!e.show_feedback_time&&!e.show_feedback_border){if(r&&!u){const i=performance.now()-d,c=Math.max(0,e.stimulus_duration-i)+e.feedback_duration;setTimeout(()=>{const f=document.getElementById(`cell-${y}-${_}`);f.style.backgroundColor="white",setTimeout(()=>{l(t,a,r)},e.isi_duration)},c)}else l(t,a,r);return}const s=document.getElementById("nback-response-btn");s.disabled=!0,s.style.opacity="0.6";let n;if(r&&!u){const i=performance.now()-d;n=Math.max(0,e.stimulus_duration-i)+e.feedback_duration}else if(r&&u){const i=performance.now()-d,c=e.stimulus_duration,f=i-c;n=Math.max(0,e.isi_duration-f)+e.feedback_duration}else if(e.feedbackWaitNoResponse)n=e.feedback_duration;else{l(t,a,r);return}if(a===null&&!e.showFeedbackNoResponse){e.feedbackWaitNoResponse?setTimeout(()=>{l(t,a,r)},n):l(t,a,r);return}const B=document.getElementById("nback-grid"),v=document.getElementById("nback-feedback"),L=document.getElementById(`cell-${y}-${_}`);if(e.show_feedback_border&&(B.style.border=`6px solid ${t?e.correct_color:e.incorrect_color}`),e.show_feedback_time){let i=t?"Correct!":"Incorrect!";a!==null&&(i+=` (${Math.round(a)}ms)`),v.textContent=i,v.style.color=t?e.correct_color:e.incorrect_color}if(r&&!u){const i=performance.now()-d,c=Math.max(0,e.stimulus_duration-i);setTimeout(()=>{L.style.backgroundColor="white",setTimeout(()=>{l(t,a,r)},e.feedback_duration+e.isi_duration)},c)}else if(r&&u){const i=performance.now()-d,c=e.stimulus_duration,f=i-c,z=Math.max(0,e.isi_duration-f);setTimeout(()=>{l(t,a,r)},z+e.feedback_duration)}else setTimeout(()=>{l(t,a,r)},n)},l=(t,a,r)=>{const s={stimulus_row:y,stimulus_col:_,is_target:e.is_target,response:r,response_time:a,correct:t};b.innerHTML="",this.jsPsych.finishTrial(s)};N(),M()}}return T.info=I,T}(jsPsychModule);
//# sourceMappingURL=index.browser.min.js.map
